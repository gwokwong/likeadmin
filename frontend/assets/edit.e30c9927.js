import{_ as G}from"./index.6d47c9ed.js";import{N as J,x as K,O as W,P as M,y as z,I as H,C as X,D as Y,J as Z,Q as ee,R as le,B as ue,K as ae,F as oe,w as te}from"./element-plus.f5eb07a0.js";import{u as ne,a as de}from"./vue-router.5046cc50.js";import{t as me,g as re}from"./code.1b609fc8.js";import{d as se}from"./dict.7598c3e1.js";import{e as be,f as U}from"./index.64e62b67.js";import{m as ie}from"./menu.77a3989d.js";import{u as pe}from"./useDictOptions.b34b37f1.js";import{d as A,r as Fe,a0 as h,s as ce,o as m,c as F,V as l,M as u,a as b,W as _,a8 as f,L as g,u as _e,S as k,T as E}from"./@vue.cab01781.js";import"./@vueuse.724ed0af.js";import"./@element-plus.92b4185f.js";import"./lodash-es.29c53eac.js";import"./dayjs.22a46fd8.js";import"./axios.8058589d.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.bbe6f09f.js";import"./pinia.e85e8286.js";import"./vue-demi.bfae2336.js";import"./css-color-function.5bd363c0.js";import"./color.232115c1.js";import"./clone.8f44c0eb.js";import"./color-convert.69e17089.js";import"./color-string.e356f5de.js";import"./color-name.e7a4e1d3.js";import"./nprogress.404eaa9c.js";import"./vue-clipboard3.19ab9072.js";import"./clipboard.6fb7c109.js";import"./echarts.6ad8c478.js";import"./zrender.f91f2f01.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.0ab41b7b.js";const ge={class:"code-edit"},Ve={class:"w-80"},fe={class:"w-80"},Be={class:"w-80"},Ee={class:"w-80"},ve={class:"w-80"},Ne=E("\u5355\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09"),ye=E("\u6811\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09"),Te={class:"w-80"},Ce=b("div",{class:"form-tips"},"\u751F\u6210\u6587\u4EF6\u6240\u5728\u6A21\u5757\u540D",-1),De={class:"w-80"},Ue=E("\u538B\u7F29\u5305\u4E0B\u8F7D"),he=E("\u81EA\u5B9A\u4E49\u8DEF\u5F84"),ke={class:"w-80"},Ae={class:"w-80"},we=E("\u4FDD\u5B58"),Pe=A({name:"tableEdit"}),_l=A({...Pe,setup(qe){const w=ne(),P=de(),{removeTab:q}=be(),y=Fe("column"),o=h({base:{id:"",tableName:"",tableComment:"",entityName:"",authorName:"",remarks:""},column:[],gen:{functionName:"",genPath:"",genTpl:"",genType:0,moduleName:"",subTableFk:"",subTableName:"",subTableFr:"",treeParent:"",treePrimary:"",treeName:""}}),T=ce(),C=h({["base.tableName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",trigger:"blur"}],["base.tableComment"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",trigger:"blur"}],["base.entityName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B9E\u4F53\u7C7B\u540D\u79F0",trigger:"blur"}],["base.authorName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F5C\u8005",trigger:"blur"}],["gen.moduleName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u6A21\u5757\u540D",trigger:"blur"}],["gen.functionName"]:[{required:!0,message:"\u8BF7\u8F93\u5165\u529F\u80FD\u540D\u79F0",trigger:"blur"}],["gen.treePrimary"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u4E3B\u952E\u5B57\u6BB5",trigger:"blur"}],["gen.treeParent"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u7236\u7EA7\u5B57\u6BB5",trigger:"blur"}],["gen.treeName"]:[{required:!0,message:"\u8BF7\u9009\u62E9\u6811\u540D\u79F0\u5B57\u6BB5",trigger:"blur"}]}),R=async()=>{const p=await me({id:w.query.id});Object.keys(o).forEach(a=>{o[a]=p[a]})},{optionsData:x}=pe({dictType:{api:se},menu:{api:ie,transformData(p){const a={id:0,name:"\u9876\u7EA7",children:[]};return a.children=p,a}}}),$=async()=>{var p,a;try{await((p=T.value)==null?void 0:p.validate());const{base:V,column:c,gen:r}=o;await re({...V,...r,column:c}),U.msgSuccess("\u64CD\u4F5C\u6210\u529F"),q(),P.back()}catch(V){for(const c in V)Object.keys(C).includes(c)&&U.msgError((a=V[c][0])==null?void 0:a.message)}};return R(),(p,a)=>{const V=J,c=H,r=X,d=Y,v=K,s=Z,t=ee,i=le,B=ue,I=ae,N=W,D=M,L=z,S=oe,j=te,O=G;return m(),F("div",ge,[l(c,{class:"!border-none",shadow:"never"},{default:u(()=>[l(V,{content:"\u7F16\u8F91\u6570\u636E\u8868",onBack:a[0]||(a[0]=e=>p.$router.back())})]),_:1}),l(c,{class:"mt-4 !border-none",shadow:"never"},{default:u(()=>[l(S,{ref_key:"formRef",ref:T,class:"ls-form",model:o,"label-width":"130px",rules:C},{default:u(()=>[l(L,{modelValue:y.value,"onUpdate:modelValue":a[17]||(a[17]=e=>y.value=e)},{default:u(()=>[l(v,{label:"\u57FA\u7840\u4FE1\u606F",name:"base"},{default:u(()=>[l(d,{label:"\u8868\u540D\u79F0",prop:"base.tableName"},{default:u(()=>[b("div",Ve,[l(r,{modelValue:o.base.tableName,"onUpdate:modelValue":a[1]||(a[1]=e=>o.base.tableName=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),l(d,{label:"\u8868\u63CF\u8FF0",prop:"base.tableComment"},{default:u(()=>[b("div",fe,[l(r,{modelValue:o.base.tableComment,"onUpdate:modelValue":a[2]||(a[2]=e=>o.base.tableComment=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",clearable:""},null,8,["modelValue"])])]),_:1}),l(d,{label:"\u5B9E\u4F53\u7C7B\u540D\u79F0",prop:"base.entityName"},{default:u(()=>[b("div",Be,[l(r,{modelValue:o.base.entityName,"onUpdate:modelValue":a[3]||(a[3]=e=>o.base.entityName=e),placeholder:"\u8BF7\u8F93\u5165\u5B9E\u4F53\u7C7B\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),l(d,{label:"\u4F5C\u8005",prop:"base.authorName"},{default:u(()=>[b("div",Ee,[l(r,{modelValue:o.base.authorName,"onUpdate:modelValue":a[4]||(a[4]=e=>o.base.authorName=e),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005",clearable:""},null,8,["modelValue"])])]),_:1}),l(d,{label:"\u5907\u6CE8"},{default:u(()=>[b("div",ve,[l(r,{modelValue:o.base.remarks,"onUpdate:modelValue":a[5]||(a[5]=e=>o.base.remarks=e),class:"w-full",type:"textarea",autosize:{minRows:4,maxRows:4},maxlength:"200","show-word-limit":"",clearable:""},null,8,["modelValue"])])]),_:1})]),_:1}),l(v,{label:"\u5B57\u6BB5\u7BA1\u7406",name:"column"},{default:u(()=>[l(I,{data:o.column},{default:u(()=>[l(s,{label:"\u5B57\u6BB5\u5217\u540D",prop:"columnName"}),l(s,{label:"\u5B57\u6BB5\u63CF\u8FF0",prop:"columnComment","min-width":"120"},{default:u(({row:e})=>[l(r,{modelValue:e.columnComment,"onUpdate:modelValue":n=>e.columnComment=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(s,{label:"\u7269\u7406\u7C7B\u578B",prop:"columnType","min-width":"100"}),l(s,{label:"Java\u7C7B\u578B","min-width":"100"},{default:u(({row:e})=>[l(i,{modelValue:e.javaType,"onUpdate:modelValue":n=>e.javaType=n},{default:u(()=>[l(t,{label:"Long",value:"Long"}),l(t,{label:"String",value:"String"}),l(t,{label:"Integer",value:"Integer"}),l(t,{label:"Double",value:"Double"}),l(t,{label:"BigDecimal",value:"BigDecimal"}),l(t,{label:"Date",value:"Date"}),l(t,{label:"Boolean",value:"Boolean"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),l(s,{label:"Java\u5C5E\u6027","min-width":"100"},{default:u(({row:e})=>[l(r,{modelValue:e.javaField,"onUpdate:modelValue":n=>e.javaField=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(s,{label:"\u5FC5\u586B",width:"80"},{default:u(({row:e})=>[l(B,{modelValue:e.isRequired,"onUpdate:modelValue":n=>e.isRequired=n,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(s,{label:"\u63D2\u5165",width:"80"},{default:u(({row:e})=>[l(B,{modelValue:e.isInsert,"onUpdate:modelValue":n=>e.isInsert=n,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(s,{label:"\u7F16\u8F91",width:"80"},{default:u(({row:e})=>[l(B,{modelValue:e.isEdit,"onUpdate:modelValue":n=>e.isEdit=n,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(s,{label:"\u5217\u8868",width:"80"},{default:u(({row:e})=>[l(B,{modelValue:e.isList,"onUpdate:modelValue":n=>e.isList=n,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(s,{label:"\u67E5\u8BE2",width:"80"},{default:u(({row:e})=>[l(B,{modelValue:e.isQuery,"onUpdate:modelValue":n=>e.isQuery=n,"true-label":1,"false-label":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(s,{label:"\u67E5\u8BE2\u65B9\u5F0F"},{default:u(({row:e})=>[l(i,{modelValue:e.queryType,"onUpdate:modelValue":n=>e.queryType=n},{default:u(()=>[l(t,{label:"=",value:"EQ"}),l(t,{label:"!=",value:"NE"}),l(t,{label:">",value:"GT"}),l(t,{label:">=",value:"GTE"}),l(t,{label:"<",value:"LT"}),l(t,{label:"<=",value:"LTE"}),l(t,{label:"LIKE",value:"LIKE"}),l(t,{label:"BETWEEN",value:"BETWEEN"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),l(s,{label:"\u663E\u793A\u7C7B\u578B","min-width":"120"},{default:u(({row:e})=>[l(i,{modelValue:e.htmlType,"onUpdate:modelValue":n=>e.htmlType=n},{default:u(()=>[l(t,{label:"\u6587\u672C\u6846",value:"input"}),l(t,{label:"\u6570\u5B57\u6846",value:"number"}),l(t,{label:"\u6587\u672C\u57DF",value:"textarea"}),l(t,{label:"\u4E0B\u62C9\u6846",value:"select"}),l(t,{label:"\u5355\u9009\u6846",value:"radio"}),l(t,{label:"\u590D\u9009\u6846",value:"checkbox"}),l(t,{label:"\u65E5\u671F\u63A7\u4EF6",value:"datetime"}),l(t,{label:"\u56FE\u7247\u9009\u62E9\u63A7\u4EF6",value:"imageUpload"}),l(t,{label:"\u5BCC\u6587\u672C\u63A7\u4EF6",value:"editor"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),l(s,{label:"\u5B57\u5178\u7C7B\u578B","min-width":"120"},{default:u(({row:e})=>[l(i,{modelValue:e.dictType,"onUpdate:modelValue":n=>e.dictType=n,clearable:"",disabled:!(e.htmlType=="select"||e.htmlType=="radio"||e.htmlType=="checkbox"),placeholder:"\u5B57\u5178\u7C7B\u578B"},{default:u(()=>[(m(!0),F(_,null,f(_e(x).dictType,(n,Q)=>(m(),g(t,{key:Q,label:n.dictName,value:n.dictType,disabled:!n.dictStatus},null,8,["label","value","disabled"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1})]),_:1},8,["data"])]),_:1}),l(v,{label:"\u751F\u6210\u914D\u7F6E",name:"config"},{default:u(()=>[l(d,{label:"\u6A21\u677F\u7C7B\u578B",prop:"gen.genTpl",required:""},{default:u(()=>[l(D,{modelValue:o.gen.genTpl,"onUpdate:modelValue":a[6]||(a[6]=e=>o.gen.genTpl=e)},{default:u(()=>[l(N,{label:"crud"},{default:u(()=>[Ne]),_:1},8,["label"]),l(N,{label:"tree"},{default:u(()=>[ye]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u6A21\u5757\u540D",prop:"gen.moduleName"},{default:u(()=>[b("div",Te,[l(r,{modelValue:o.gen.moduleName,"onUpdate:modelValue":a[7]||(a[7]=e=>o.gen.moduleName=e),placeholder:"\u8BF7\u8F93\u5165\u6A21\u5757\u540D",clearable:""},null,8,["modelValue"]),Ce])]),_:1}),l(d,{label:"\u529F\u80FD\u540D\u79F0",prop:"gen.functionName"},{default:u(()=>[b("div",De,[l(r,{modelValue:o.gen.functionName,"onUpdate:modelValue":a[8]||(a[8]=e=>o.gen.functionName=e),placeholder:"\u8BF7\u8F93\u5165\u529F\u80FD\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),_:1}),l(d,{label:"\u751F\u6210\u65B9\u5F0F",prop:"gen.genType"},{default:u(()=>[l(D,{modelValue:o.gen.genType,"onUpdate:modelValue":a[9]||(a[9]=e=>o.gen.genType=e)},{default:u(()=>[l(N,{label:0},{default:u(()=>[Ue]),_:1},8,["label"]),l(N,{label:1},{default:u(()=>[he]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),o.gen.genType==1?(m(),g(d,{key:0,label:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",prop:"gen.genPath"},{default:u(()=>[b("div",ke,[l(r,{modelValue:o.gen.genPath,"onUpdate:modelValue":a[10]||(a[10]=e=>o.gen.genPath=e),placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u8DEF\u5F84",clearable:""},null,8,["modelValue"])])]),_:1})):k("",!0),o.gen.genTpl=="tree"?(m(),F(_,{key:1},[l(d,{label:"\u6811\u4E3B\u952E\u5B57\u6BB5",prop:"gen.treePrimary"},{default:u(()=>[l(i,{class:"w-80",modelValue:o.gen.treePrimary,"onUpdate:modelValue":a[11]||(a[11]=e=>o.gen.treePrimary=e),clearable:""},{default:u(()=>[(m(!0),F(_,null,f(o.column,e=>(m(),g(t,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u6811\u7236\u7EA7\u5B57\u6BB5",prop:"gen.treeParent"},{default:u(()=>[l(i,{class:"w-80",modelValue:o.gen.treeParent,"onUpdate:modelValue":a[12]||(a[12]=e=>o.gen.treeParent=e),clearable:""},{default:u(()=>[(m(!0),F(_,null,f(o.column,e=>(m(),g(t,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u6811\u540D\u79F0\u5B57\u6BB5",prop:"gen.treeName"},{default:u(()=>[l(i,{class:"w-80",modelValue:o.gen.treeName,"onUpdate:modelValue":a[13]||(a[13]=e=>o.gen.treeName=e),clearable:""},{default:u(()=>[(m(!0),F(_,null,f(o.column,e=>(m(),g(t,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})],64)):k("",!0)]),_:1}),l(v,{label:"\u5173\u8054\u914D\u7F6E",name:"relation"},{default:u(()=>[l(d,{label:"\u5173\u8054\u5B50\u8868\u7684\u8868\u540D",prop:"gen.subTableName"},{default:u(()=>[l(i,{class:"w-80",modelValue:o.gen.subTableName,"onUpdate:modelValue":a[14]||(a[14]=e=>o.gen.subTableName=e),clearable:""},{default:u(()=>[(m(!0),F(_,null,f(o.column,e=>(m(),g(t,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u5B50\u8868\u5173\u8054\u7684\u5916\u952E\u540D ",prop:"gen.subTableFk"},{default:u(()=>[l(i,{class:"w-80",modelValue:o.gen.subTableFk,"onUpdate:modelValue":a[15]||(a[15]=e=>o.gen.subTableFk=e),clearable:""},{default:u(()=>[(m(!0),F(_,null,f(o.column,e=>(m(),g(t,{key:e.id,value:e.columnName,label:`${e.columnName}\uFF1A${e.columnComment}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u5173\u8054\u8868\u4E3B\u952E ",prop:"gen.subTableFr"},{default:u(()=>[b("div",Ae,[l(r,{modelValue:o.gen.subTableFr,"onUpdate:modelValue":a[16]||(a[16]=e=>o.gen.subTableFr=e),placeholder:"\u8BF7\u8F93\u5165\u5173\u8054\u8868\u4E3B\u952E",clearable:""},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model","rules"])]),_:1}),l(O,null,{default:u(()=>[l(j,{type:"primary",onClick:$},{default:u(()=>[we]),_:1})]),_:1})])}}});export{_l as default};
